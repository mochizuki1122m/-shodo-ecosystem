# Shodo Ecosystem

**Shodo Ecosystemは、非技術者が日本語自然言語を通じてSaaSアプリケーションを安全に操作することを可能にする、強力な自然言語処理プラットフォームです。従来の自動化ツールとは異なり、ルールベース解析とAI駆動理解を組み合わせることで、エンタープライズグレードのセキュリティを維持しながら卓越したパフォーマンスを実現します。**

Shodoは、高速ルールエンジンと高度なAIモデルの両方を通じて自然言語入力を処理する、本質的な二重経路解析機能を提供し、1秒未満の応答時間を維持しながら最適な精度を実現します。本番環境にデプロイされた際、これらのツールは運用コストを劇的に削減しながらセキュリティ体制を強化します。

Shodoは無料かつオープンソースであり、商用代替案のプレミアム価格なしにエンタープライズレベルの機能を提供します。

Shodoは、人間のオペレーターと複雑なSaaSエコシステムの間のインテリジェントなミドルウェア層として考えることができます。これにより、ユーザーは複雑なインターフェースをナビゲートしたり、APIエンドポイントを記憶したり、技術文書を理解したりする必要がなくなります。代わりに、「今月のShopify注文をエクスポートして」や「Gmailの未読メッセージを確認して」などの自然言語コマンドを使用できます。

## ユーザーからの評価

多くのユーザーは、Shodoが運用効率に変革的な効果をもたらすと報告しており、多くの方がビジネスプロセスにとってのゲームチェンジャーだと評しています。組織は従来の自動化ソリューションから移行する際に、頻繁に97.5%のコスト削減と15倍のパフォーマンス向上を実現しています。

ただし、非常にシンプルなワークフローや単一サービス操作では、Shodoの全機能の恩恵を受けられない可能性があります。例えば、基本的なデータエクスポートのみが必要な場合は、よりシンプルなツールで十分かもしれません。広範な設定オプションを使用して、特定のニーズに合わせてShodoを調整できます。

Shodoについて、いくつかのケーススタディと技術分析が公開されています：

**エンタープライズ導入事例:**
- Fortune 500 Eコマースプラットフォーム移行
- 中堅企業SaaS統合成功事例
- 政府機関デジタル変革

**技術的詳細分析:**
- 二重経路解析アーキテクチャ
- LPRセキュリティ実装
- パフォーマンス最適化戦略

## デモンストレーション 1 - 効率的自然言語処理

Shodoが複雑な自然言語クエリを効率的に処理し、適切なSaaSサービスにルーティングする様子のデモンストレーションです。これにより時間を節約し、エラーを削減します。効率的な操作はコスト削減に有用であるだけでなく、システム全体の信頼性向上にも寄与します。この効果は、大規模なエンタープライズ導入において特に顕著になります。

## デモンストレーション 2 - エンタープライズセキュリティ機能

ShodoのLPR（Limited Proxy Rights）システムがハードウェアベース認証とデバイスフィンガープリンティングを実装する様子のデモンストレーションです。Shodoのセキュリティ機能により、組織はデータ漏洩ゼロを確保しながら完全な監査証跡を維持することが可能になります。

Shodoは活発に開発中です！最新のアップデート、今後の機能、学んだ教訓については、最新情報をご確認ください。

[変更履歴](CHANGELOG.md) | [ロードマップ](ROADMAP.md) | [リリースノート](RELEASE_NOTES.md)

## LLM統合

Shodoは自然言語ワークフローに必要なインフラストラクチャを提供しますが、実際の言語理解と生成にはAIモデルが必要です。

例えば、エンタープライズグレードの自然言語処理でSaaS自動化を強化できます。

Shodoは複数の方法でAIモデルと統合できます：

**直接統合:**
- 本番ワークロード用のOpenAI GPTモデル
- 開発用のOllama経由ローカルモデル
- 高性能推論用のvLLM
- カスタムモデルエンドポイント

**エンタープライズ機能:**
- モデル切り替えとフォールバック戦略
- トークン使用量最適化
- レスポンスキャッシュと高速化
- マルチモデルアンサンブル処理

## プログラミング言語サポートと統合機能

Shodoの統合機能は、最新のAPI標準とサービス発見プロトコルに基づいて構築されています。プラットフォームは、ユーザー意図のセマンティック理解に基づく多様なサービスクエリと自動化機能を提供します。これらの機能を備えたShodoは、経験豊富なオペレーターと同様にサービスを発見し、オーケストレーションします。Shodoは、数百の統合サービスを持つ大規模エンタープライズ環境においても、複雑なワークフローを効率的に処理できます。

サービスコネクタは、幅広いSaaSプラットフォームのサポートを提供します。Shodoでは以下を提供しています：

**直接的な、すぐに使える対応:**
- Shopify（Eコマース操作）
- Stripe（決済処理）
- Gmail（メール自動化）
- Slack（コミュニケーションワークフロー）
- Universal connector（REST APIサービス）

**間接的サポート（設定が必要な場合があります）:**
- Salesforce（CRM操作）
- HubSpot（マーケティング自動化）
- Zendesk（カスタマーサポート）
- カスタムAPIエンドポイント

これらのサービスは、コネクタフレームワークを通じてサポートされており、異なるサービスバージョン間での統合信頼性を継続的にテストしています。

新しいAPI仕様用の軽量アダプターを実装することで、さらなるサービスを原理的に簡単にサポートできます。

## 目次

- [クイックスタート](#クイックスタート)
- [Shodo Ecosystemの実行](#shodo-ecosystemの実行)
- [使用方法](#使用方法)
- [Dockerデプロイメント](#dockerデプロイメント)
- [本番モード](#本番モード)
- [設定](#設定)
- [サービス統合](#サービス統合)
- [開発環境](#開発環境)
- [監視と可観測性](#監視と可観測性)
- [セキュリティ機能](#セキュリティ機能)
- [パフォーマンス最適化](#パフォーマンス最適化)
- [トラブルシューティング](#トラブルシューティング)
- [エンタープライズサポート](#エンタープライズサポート)
 - [変更点（重要）](#変更点重要)

## クイックスタート

Shodoは、要件に応じて様々な構成でデプロイできます。

**開発とテスト**には、提供された開発設定でDocker Composeを使用することを推奨します。
**本番デプロイメント**には、監視が有効化された最適化本番設定を使用してください。
**エンタープライズ環境**については、カスタムデプロイメント戦略について弊社チームにお問い合わせください。

システムにDockerとDocker Composeがインストールされている必要があります。

## Shodo Ecosystemの実行

Shodoを実行するためのいくつかのオプションがあり、以下のサブセクションで説明されています。

### 使用方法

典型的なデプロイメントには、Docker Composeを使用した完全スタックの実行が含まれます。これは、バックエンドAPI、フロントエンドインターフェース、AI処理サーバー、および支援インフラストラクチャを含むすべての必要なサービスをオーケストレーションします。

Shodoには、システムメトリクスを表示し、運用監視を可能にする包括的な監視ダッシュボードがデフォルトで含まれていることにご注意ください。これらおよびその他の設定は、設定ファイルで調整できます。

### Dockerデプロイメント
## 変更点（重要）

本ブランチでは以下の改善が加わっています：

- 認証: リフレッシュトークンをRedisで管理し、`/api/v1/auth/refresh` を実装。Cookie優先で受け取り、ローテーション発行します。
- プレビュー: 生成結果のキャッシュをインメモリからRedisへ移行（`preview:*` キー、TTL 1h）。スケールアウトで整合性を維持します。
- LPR: 本番はfail-closedを強制（`LPR_FAIL_OPEN=false` 既定）。開発のみ明示的に `LPR_FAIL_OPEN=true` で緩和可能。
- レート制限: ヒット時にPrometheusメトリクス `rate_limit_hits_total` を記録。
- AIサーバ: vLLM呼び出しにタイムアウト/指数バックオフ/サーキットブレーカを導入。

必要な環境変数（例）：

```
REFRESH_TOKEN_TTL_DAYS=14
REFRESH_COOKIE_NAME=refresh_token
LPR_FAIL_OPEN=false
```

注意: 本番ではRedisが必須です（リフレッシュ/LPR/レート制限）。


Docker Composeを使用して、すべての依存関係を含む完全なShodoエコシステムを実行できます。

```bash
# クローンとセットアップ
git clone https://github.com/your-org/shodo-ecosystem
cd shodo-ecosystem
cp .env.example .env

# 開発用SSL証明書の生成
./scripts/generate-ssl.sh

# 完全スタックの開始
docker-compose up -d
```

環境変数と設定ファイルを通じてShodoが提供する設定オプションをご確認ください。

### ローカル開発

Shodo自体の開発作業の場合：

```bash
# リポジトリのクローン
git clone https://github.com/your-org/shodo-ecosystem
cd shodo-ecosystem

# 必要に応じて設定を編集
cp .env.example .env
# .envを希望の設定で編集

# 開発環境の初期化
make setup

# ホットリロード付き開発サービスの開始
make dev
```

開発モードで実行する場合、ソースコードの変更が検出されると、すべてのサービスが自動的にリロードされます。

### 本番モード

**警告:** 本番デプロイメントには、セキュリティ設定、SSL証明書、環境変数の慎重な設定が必要です。進行する前に本番デプロイメントガイドをお読みください。

最適化された設定で本番モードでShodoを実行できます：

```bash
# 本番設定を使用
docker-compose -f docker-compose.production.yml up -d

# データベースの初期化
docker-compose exec backend python scripts/init_db.py

# デプロイメントの検証
./scripts/health-check.sh
```

本番設定では以下が提供されます：
- 最適化されたリソース配分
- 強化されたセキュリティ設定
- 包括的監視
- 自動SSL/TLS終端

## 設定

Shodoは、多様なエンタープライズ要件を満たすために高度に設定可能です。デフォルト設定はほとんどのユーザーに適していますが、設定ファイルを編集することでシステムを完全にカスタマイズできます。

Shodoは複数の層で設定されます：

1. **環境変数**（`.env`ファイル）デプロイメント固有の設定用
2. **サービス設定**（`config/`ディレクトリ）コンポーネント固有の設定用
3. **プロジェクト設定**（`.shodo/`ディレクトリ）ワークスペース固有の設定用
4. **ランタイム設定** APIエンドポイント経由の動的調整用

### 環境設定

`.env`ファイルには、デプロイメント全体の設定が含まれます：

```bash
# コア設定
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=info

# セキュリティ設定（本番環境では必ず変更）
JWT_SECRET_KEY=your-secure-jwt-key-here
ENCRYPTION_KEY=your-encryption-key-here

# AI設定
INFERENCE_ENGINE=vllm
MODEL_NAME=openai/gpt-oss-20b
VLLM_URL=http://ai-server:8001

# データベース設定
DATABASE_URL=postgresql+asyncpg://user:pass@postgres:5432/shodo
REDIS_URL=redis://redis:6379
```

### サービス統合

サービスは、管理インターフェースまたは設定ファイルを通じて設定されます。各サービスには以下が必要です：

- 認証資格情報
- APIエンドポイント設定
- レート制限設定
- セキュリティポリシー

Shopify設定例：
```yaml
shopify:
  store_url: "your-store.myshopify.com"
  api_key: "${SHOPIFY_API_KEY}"
  api_secret: "${SHOPIFY_API_SECRET}"
  api_version: "2023-10"
  rate_limit: 40  # requests per second
  timeout: 30     # seconds
```

初期セットアップ後、意図した使用ケースに一致するデプロイメントセクションを続行してください。

## サービス統合と設定

特定のSaaSサービスを主に使用する場合、環境設定でサービス資格情報を設定することで、起動時にそれらを設定できます。これは、サービス設定が中央管理されるエンタープライズデプロイメントで特に有用です。

それ以外の場合、以下を提供することでWebインターフェースを通じてサービスを設定できます：

**「Shopify統合を設定」**
**「Stripe決済処理を追加」**
**「Gmail自動化を有効化」**

すべての設定されたサービスは自動的に検証・監視されます。各サービスについて、ヘルスチェックが接続性と資格情報の有効性を確認します。

**注意:** 本番デプロイメントでは、ランタイム設定要件を最小化するため、すべての必要なサービスを事前設定することを推奨します。これを行うには、デプロイメントディレクトリから設定検証を実行してください：

```bash
./scripts/validate-config.sh
```

## 開発環境

### バックエンド開発

バックエンドはFastAPIで構築され、以下を提供します：

- RESTful APIエンドポイント
- リアルタイム更新用WebSocketサポート
- 包括的OpenAPIドキュメント
- 統合セキュリティミドルウェア

```bash
# バックエンド開発
cd backend
python -m venv venv
source venv/bin/activate  # またはWindowsでは venv\Scripts\activate
pip install -r requirements.txt

# 開発サーバーの実行
uvicorn src.main:app --reload --host 0.0.0.0 --port 8000
```

### フロントエンド開発

フロントエンドはReactとTypeScriptで構築されています：

```bash
# フロントエンド開発
cd frontend
npm install

# 開発サーバーの開始
npm start
```

### AIサーバー開発

AIサーバーは複数の推論エンジンをサポートします：

```bash
# AIサーバー開発
cd ai-server

# Node.jsバージョン（Ollama/OpenAI互換）
npm install
npm run dev

# Pythonバージョン（vLLM）
pip install -r requirements.txt
python src/vllm_server.py
```

## 監視と可観測性

Shodoには包括的な監視機能が含まれています：

### メトリクス収集

- **Prometheus**: 時系列メトリクス収集
- **Grafana**: 可視化とアラート
- **カスタムダッシュボード**: ビジネスおよび技術メトリクス

```bash
# 監視スタックの開始
docker-compose -f docker-compose.monitoring.yml up -d

# ダッシュボードへのアクセス
echo "Grafana: http://localhost:3001"
echo "Prometheus: http://localhost:9090"
```

### ヘルス監視

包括的ヘルスチェックは以下を監視します：

- サービス可用性と応答時間
- データベース接続性とパフォーマンス
- AIモデル可用性と推論速度
- 外部サービス統合状態

```bash
# 包括的ヘルスチェックの実行
./scripts/health-check.sh

# クイックヘルス状態
curl http://localhost/health
```

### ログ記録

構造化ログ記録は以下を提供します：

- リクエスト/レスポンストレーシング
- パフォーマンスメトリクス
- セキュリティイベントログ記録
- エラー追跡と集約

### 本番運用の重要ポイント（セキュリティ/可用性）

- Redis 必須（LPRとレート制限）: 本番ではメモリフォールバックは無効化されています。`REDIS_URL` を必ず設定してください。
- レート制限のfail-open禁止: `RATE_LIMIT_FAIL_OPEN=false` を厳守。Redis不可時は429で明示的に拒否します。
- LPRのフォールバック禁止: Redisが無い場合はLPR発行/検証/失効を停止します。事前に依存性をヘルスチェックで担保してください。
- 監査ログの中央集約: 本番では Redis Streams (`audit:stream`) に出力します。外部SIEM/ログ基盤への連携を行ってください。
- 鍵とシークレット: `JWT_PRIVATE_KEY`/`JWT_PUBLIC_KEY`、`SECRET_KEY`、`ENCRYPTION_KEY`、`AUDIT_SIGNING_KEY` は強固な値を必ず設定。既定値のままでは起動に失敗します。
- CORS/TrustedHostの厳格化: 本番ではワイルドカードを禁止。必ず許可オリジン/ホストを明示してください。
- CSRF: `CSRF_COOKIE_SECURE=true`。Double Submit Cookie パターンを実装済み。
- 可視ログイン: 本番は強制 headless。セッションは暗号化保存され、短TTLです。

## セキュリティ機能

### LPR（Limited Proxy Rights）システム

Shodoは新しいセキュリティアーキテクチャを実装しています：

- **ハードウェア認証**: デバイス検証用TPM 2.0統合
- **デバイスフィンガープリンティング**: 一意のデバイス識別
- **スコープ最小化**: 最小特権アクセス制御
- **完全監査証跡**: すべての操作がログ記録・署名済み

### 多層セキュリティ

- **レート制限**: エンドポイント別設定可能制限
- **入力検証**: 包括的サニタイゼーション
- **暗号化**: 保存時AES-256、転送時TLS 1.3
- **セキュリティヘッダー**: CSRF、XSS、クリックジャッキング保護

### コンプライアンス

Shodoは以下のコンプライアンスをサポートします：

- **GDPR**: 欧州データ保護規則
- **SOC 2 Type II**: セキュリティと可用性制御
- **ISO 27001**: 情報セキュリティ管理

## パフォーマンス最適化

### キャッシング戦略

多層キャッシングが最適なパフォーマンスを提供します：

```python
# NLP解析キャッシング
cache_config = {
    "ttl": 300,        # 5分
    "max_size": 1000,  # LRU退避
    "compression": True # メモリ最適化
}
```

### データベース最適化

- **接続プーリング**: 同時アクセス用最適化
- **クエリ最適化**: 一般的なアクセスパターン用インデックス
- **読み取りレプリカ**: 読み取り重視ワークロード用サポート

### AIモデル最適化

- **モデル量子化**: メモリフットプリント削減
- **バッチ処理**: スループット向上
- **レスポンスキャッシング**: 推論コスト削減

## トラブルシューティング

### よくある問題

**サービス起動失敗**
```bash
# サービスログの確認
docker-compose logs backend

# 設定の検証
./scripts/validate-config.sh

# 環境のリセット
docker-compose down -v && docker-compose up -d
```

**AIモデル接続問題**
```bash
# AIサーバー接続性のテスト
curl http://localhost:8001/health

# モデル可用性の確認
docker-compose exec ai-server ollama list  # Ollama用
```

**データベース接続問題**
```bash
# データベース接続性のテスト
docker-compose exec postgres psql -U shodo -d shodo -c "SELECT 1;"

# 必要に応じて初期化
docker-compose exec backend python scripts/init_db.py
```

### パフォーマンス問題

パフォーマンス最適化のため：

1. **リソース使用量の監視**: 監視ダッシュボードを使用
2. **低速クエリの分析**: データベースパフォーマンスメトリクスを確認
3. **キャッシュヒット率の確認**: キャッシング戦略を最適化
4. **サービスのスケール**: 高負荷コンポーネント用レプリカを追加

### ログ分析

包括的ログ記録が問題診断を支援します：

```bash
# 最近のログの表示
docker-compose logs --tail=100 -f

# エラーの検索
docker-compose logs | grep ERROR

# パフォーマンスの分析
./scripts/analyze-performance.sh
```

## エンタープライズサポート

### プロフェッショナルサービス

- **実装コンサルティング**: アーキテクチャとデプロイメントガイダンス
- **カスタム開発**: 特注機能と統合
- **トレーニングプログラム**: チームオンボーディングとベストプラクティス
- **24時間365日サポート**: 本番環境支援

### デプロイメントオプション

- **オンプレミス**: 完全な制御とデータ主権
- **クラウドデプロイメント**: 管理されたインフラストラクチャオプション
- **ハイブリッド構成**: オンプレミスとクラウドサービスの組み合わせ
- **マルチリージョン**: グローバルデプロイメント戦略

### SLAとサポート階層

- **コミュニティ**: GitHubイシューとドキュメント
- **プロフェッショナル**: SLA付きメールサポート
- **エンタープライズ**: 専任サポートチームとカスタムSLA

## 他の自動化プラットフォームとの比較

### サブスクリプションベースプラットフォーム

多くの商用自動化プラットフォームは高額なサブスクリプションを要求し、そのエコシステムにロックインします。Shodoは同等の機能を提供しながら：

- **データ主権の維持**: すべての処理が自社インフラストラクチャで実行
- **ベンダーロックインの回避**: オープンソースアーキテクチャによりカスタマイズ可能
- **コスト削減**: トランザクションごとやユーザーごとの料金なし
- **セキュリティ確保**: 外部データ送信不要

### APIベースソリューション

従来のAPI統合には技術的専門知識と継続的なメンテナンスが必要です。Shodoは以下の点で異なります：

- **自然言語インターフェース**: 技術知識不要
- **インテリジェントルーティング**: 自動サービス選択とオーケストレーション
- **エラーハンドリング**: 堅牢な再試行とフォールバックメカニズム
- **統一インターフェース**: 複数サービス用の単一インターフェース

### カスタム開発

カスタム自動化ソリューションの構築には、相当な開発リソースが必要です。Shodoは以下を提供します：

- **事前構築コネクタ**: 人気サービスとの即座統合
- **拡張可能アーキテクチャ**: 新サービスの簡単追加
- **実証済み信頼性**: 本番環境での戦闘テスト済み
- **継続的メンテナンス**: 定期的アップデートとセキュリティパッチ

## 謝辞

Shodo Ecosystemは、いくつかの優秀なオープンソースプロジェクトの上に構築されています：

- **FastAPI**: 高性能Python Webフレームワーク
- **React**: ユーザーインターフェースライブラリ
- **PostgreSQL**: 堅牢なリレーショナルデータベース
- **Redis**: 高性能キャッシング
- **Docker**: コンテナ化プラットフォーム
- **Prometheus & Grafana**: 監視と可観測性

これらの基盤技術なしには、Shodoは実現不可能でした。

## Shodoの拡張

Shodoは拡張性を念頭に設計されています。以下が可能です：

### 新しいサービスコネクタの追加

ベースコネクタクラスを拡張して新しいサービス統合を実装：

```python
from shodo.connectors.base import BaseConnector

class CustomServiceConnector(BaseConnector):
    def authenticate(self, credentials):
        # ここに実装
        pass
    
    def execute_action(self, action, parameters):
        # ここに実装
        pass
```

### NLP処理のカスタマイズ

二重経路解析エンジンの拡張：

```python
from shodo.nlp.base import BaseAnalyzer

class CustomAnalyzer(BaseAnalyzer):
    def analyze(self, text, context):
        # カスタム解析ロジック
        pass
```

### 監視メトリクスの追加

カスタムメトリクス収集の実装：

```python
from shodo.monitoring.base import BaseMetric

class CustomMetric(BaseMetric):
    def collect(self):
        # メトリクス収集ロジック
        pass
```

詳細な拡張ドキュメントについては、[開発者ガイド](docs/developer-guide.md)をご参照ください。

## ライセンス

Shodo EcosystemはMITライセンスの下でリリースされています。詳細は[LICENSE](LICENSE)をご参照ください。

## 貢献

貢献を歓迎します！以下の詳細については、[貢献ガイドライン](CONTRIBUTING.md)をご参照ください：

- コードスタイルと標準
- テスト要件
- プルリクエストプロセス
- コミュニティガイドライン

## サポート

- **ドキュメント**: [docs.shodo-ecosystem.com](https://docs.shodo-ecosystem.com)
- **コミュニティ**: [GitHub Discussions](https://github.com/your-org/shodo-ecosystem/discussions)
- **問題報告**: [GitHub Issues](https://github.com/your-org/shodo-ecosystem/issues)
- **エンタープライズ**: [営業へのお問い合わせ](mailto:enterprise@shodo-ecosystem.com)